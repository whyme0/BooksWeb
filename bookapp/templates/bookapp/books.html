{% extends "bookapp/primary_pattern.html" %}
{% load static %}

{% block page_config %}
	<link rel="stylesheet" type="text/css" href="{% static 'bookapp/styles_for_books.css' %}">
{% endblock page_config %}

{% block content %}

	<div class="booklist">
	{% if books %}

		<div class="infinite-container">
		{% for book in books %}
		<a href="{% url 'bookapp:particular_book' book.pk %}" class="book-wrapper infinite-item">
			<div class="book">
				<h1 class="book-title">{{ book.book_name }}</h1><br>
				<span class="book-genre">Жанр книги: {{ book.book_genre }}</span><br>
				<span class="book-year">Год книги: {{ book.book_year }}</span>
			</div>
		</a>
		{% endfor %}
		</div>

		{% if page_obj.has_next %}
			<a class="infinite-more-link" href="?page={{ page_obj.next_page_number }}"></a>
		{% endif %}
		<div class="d-flex justify-content-center" style="display:none;">
			<div class="spinner-border" role="status">
				<span class="sr-only">Loading...</span>
			</div>
		</div>

	{% else %}
		<p>No books are available.</p>
	{% endif %}
	</div>

{% endblock content %}

{% block js-scripts %}
	<script src="{% static 'bookapp/js/jquery-2.2.4.min.js' %}"></script>
	<script src="{% static 'bookapp/js/jquery.waypoints.min.js' %}"></script>
	<script src="{% static 'bookapp/js/infinite.min.js' %}"></script>
	<script>
	var infinite = new Waypoint.Infinite({
		element: $('.infinite-container')[0],
		handler: function(direction) {
		
	},
	offset: 'bottom-in-view',

	onBeforePageLoad: function () {
	$('.spinner-border').show();
	},
	onAfterPageLoad: function () {
	$('.spinner-border').hide();
	}
		
	});

	</script>
{% endblock js-scripts %}